% !TeX root = vpl.tex

\chap{Bells and Whistles}\label{ch.bells}

Let us take time out from complicated tasks like line following and
have some fun with the robot.
We show how the Thymio can play music, respond to a sound or react when it is tapped.

\sect{Playing music}

The Thymio robot contains a sound synthesizer and you can program it
to play simple tunes using the music action block: \blkc{action-music}

{\raggedleft \hfill Program file \bu{bells.aesl}}

You won't become a new Beethoven---you can only play a sequence of notes,
on five tones and of two different lengths---but you can compose a
tune that will make your robot stand out. \Cref{fig.music} shows
two event-action pairs that respond with a tune when the front or back
button is touched. There is a different tune associated with each event.

\begin{figure}
\begin{center}
\gr{music}{.4}
\caption{Playing a tune}\label{fig.music}
\end{center}
\end{figure}

The small circles are the six notes.
A black note is a short note and a white note is a long note; to change from one length to the
other, click on the circle.
There are five colored horizontal bars, representing five tones.
To move a circle to one of bars, click on the \emph{bar} above or below the circle.
Don't try to drag and drop a note; it won't work.

\exercisebox{\thechapter.1}{
Write a program that will enable you to send a message is \href{http://en.wikipedia.org/wiki/Morse_code}{Morse code}.
Letters in Morse code are encoded in sequences of long tones
(\emph{dashes}) and short tones (\emph{dots}). For example, the letter
\emph{V} is encoded by three dots followed by one dash.}


\sect{Controlling your robot by sound}

The Thymio has a microphone. The event \blksm{event-clap} will occur
when the microphone senses a loud noise, for example, from clapping your
hands. The following event-action pair will turn on the bottom lights
when you clap your hands: \blkc{clap}

\trickbox{In a noisy environment you may not be able to use this
event, because the sound level will always be high and cause repeated
events.}

\exercisebox{\thechapter.2}{
Write a program that causes the robot to move when you clap
your hands and to stop when you touch a button.
\vspace{.5em}\\
Then write a program that does the opposite: starts when you touch a button
and stops when you clap your hands.
}


\sect{Good job, robot}

Pets don't always do what we ask them to do. Sometimes they need a pat
on the head to encourage them. You can do the same with your robot. The
Thymio contains a tap sensor that causes the event \blksm{event-tap} to
occur in response to a quick tap on the top of the robot. For example,
the following event-action pair causes the top lights to turn on when
you tap the top of the robot: \blkc{touch}

Construct a program from this event-action pair and the following pair
that turns on the bottom lights when you clap your hands: \blkc{clap}

{\raggedleft \hfill Program file \bu{whistles.aesl}}

Can you turn on just the top lights? This is difficult to do: a tap
causes a sound that can be loud enough to cause the bottom lights to be
turned on as well. With a little practice I was able to tap the robot
gently enough so that the sound was not considered an event.

\exercisebox{\thechapter.3}{
Write a program that causes the robot to move forward until it hits a
wall.
\vspace{.5em}\\
\textbf{Make sure} that the robot \textbf{moves slowly} so that it
doesn't damage itself.
}

