\chap{Sons et chocs}\label{ch.bells}

Jouons un peu avec Thymio.
Dans ce chapitre, nous vous montrerons que Thymio peut jouer de la musique et réagir à un son ou à un petite tape amicale!

\sect{Thymio mélomane}

Thymio possède un synthétiseur de sons qui lui permet de jouer des notes de musique !
Vous pouvez le programmer simplement en utilisant le bloc action :\blkc{action-music}

{\raggedleft \hfill Programme: \bu{bells.aesl}}

Vous ne deviendrez pas le nouveau Beethoven --- on ne peut jouer qu'un ensemble de six notes, sur cinq hauteurs et deux longueurs différentes --- mais vous pouvez composer une petite musique.
La \cref{fig.music} illustre deux chansons différentes jouées par Thymio lorsque vous touchez les boutons avant ou arrière.

\begin{figure}
\begin{center}
\gr{bells}{.3}
\caption{Jouer une chanson}\label{fig.music}
\end{center}
\end{figure}

Les six petits cercles sont des notes.
Les notes noires sont courtes et les notes blanches sont
longues; pour changer de longueur, cliquez sur le cercle.
Il existe cinq barres horizontales colorées qui représentent
les cinq notes.
Pour déplacer un cercle vers l'une des barres,
cliquez sur la barre au-dessus ou au-dessous du cercle,
ou glissez-déposez la note sur l'une des barres.

\exercisebox{\thechapter.1}{
Écrivez un programme qui vous permette d'envoyer un \href{http://fr.wikipedia.org/wiki/Morse_(alphabet)}{code Morse}.
Les lettres dans les codes Morse sont encodées par des séquences des sons longs (\emph{traits}) et des sons courts (\emph{points}).
Par exemple, la lettre \emph{V} est encodée par trois points suivis par un trait.
}


\sect{Contrôllez votre robot par le son}

Thymio a un microphone, il peut donc réagir à un son! L'événement \blksm{event-clap} se déclenche si Thymio entend un son fort, comme par exemple quelqu'un qui tape dans ses mains.
La paire événement-actions suivante allumera les lumières en dessous du robot lorsque vous frappez dans vos mains: \blkc{clap-lights}

\bigskip

\trickbox[Information]{Si vous vous trouvez dans un environnement bruyant, vous ne pourrez pas utiliser cet événement, car le niveau sonore sera toujours haut et l'événement s'activera à répétition.}

\bigskip

\exercisebox{\thechapter.2}{
Écrivez un programme qui fasse démarrer le robot quand vous frappez dans vos mains et le fasse s'arrêter lorsque vous touchez un bouton.
\vspace{.5em}\\
Écrivez un programme qui fasse l'opposé : le robot démarre lorsque vous touchez un bouton et s'arrête lorsque vous frappez dans vos mains.
}

\newpage

\sect{C'est bien Thymio!}

Il est important de récompenser votre animal de compagnie quand il est gentil et c'est pareil avec Thymio !
Il peut détecter si vous lui donnez une petite tape sur la tête grâce à l'événement \blksm{event-tap}.
La paire événement-actions suivante allume les lumières du haut lorsque vous lui donner une petite tape :
\blkc{good-job}

Construisez un programme avec cette paire événement-actions
et la paire suivante qui allume les lumières du bas du robot
lorsque vous tapez dans vos mains : \blkc{clap-lights}

{\raggedleft \hfill Programme: \bu{whistles.aesl}}

Arrivez-vous à n'allumer que les lumières du haut ?
C'est difficile à faire : une tape génère un son qui est assez fort pour faire aussi s'allumer les lumières du bas.
Avec un peu de pratique, on arrive à taper le robot assez gentillement pour que le son résultant ne soit pas suffisant pour être considéré.

\bigskip

\exercisebox{\thechapter.3}{
Écrivez un programme qui fasse avancer le robot jusqu'à ce qu'il touche un mur.
\vspace{.5em}\\
Faites attention à ce que le robot \textbf{bouge lentement} afin qu'il ne s'endomage pas.
}
