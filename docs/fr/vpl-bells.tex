\chap{Sons et chocs}\label{ch.bells}

Faisons une pause avec les tâches compliquées et jouons un peu avec Thymio.
Dans ce chapitre, nous vous montrerons que Thymio peut jouer de la musique, répondre à un son ou à un petite tape amicale!

\sect{Thymio mélomane}

Thymio possède un synthétiseur de sons qui lui permet de jouer des notes de musique !
Vous pouvez le programmer simplement en utilisant le bloc action :\blkc{action-music}

{\raggedleft \hfill Programme \bu{bells.aesl}}

Vous ne deviendrez pas le nouveau Beethoven --- il n'y a que six notes, et chacune ne peut être que de cinq tons et deux longueurs --- mais vous pouvez composer une petite musique qui donnera de la personalité à votre robot.
La \cref{fig.music} illustre deux chansons différentes jouées par Thymio lorsque vous appuyez sur les boutons avant ou arrière.

\begin{figure}
\begin{center}
\gr{music}{.4}
\caption{Jouer une chanson}\label{fig.music}
\end{center}
\end{figure}

Les petits cercles sont les six notes.
Chaque note doit être placée sur une barre de couleur représentant un ton.
Il suffit de cliquer avec votre souris sur la barre de couleur de votre choix au niveau de la note que vous souhaitez modifier et voilà !
Ensuite, vous pouvez choisir entre jouer une noire, un temps, et une blanche, deux temps, en cliquant sur la note que vous souhaitez modifier.
N'essayez pas de glisser/déplacer une note, ça ne fonctionnera pas.

\exercisebox{\thechapter.1}{
Écrivez un programme qui vous permet d'envoyer un \href{http://fr.wikipedia.org/wiki/Morse_(alphabet)}{code Morse}.
Les lettres dans les codes Morse sont encodées par des séquences de longs sons (\emph{traits}) et de courts sons (\emph{points}).
Par exemple, la lettre \emph{V} est encodée par trois points suivis par un trait.
}

\sect{Contrôllez votre robot par le son}

Thymio a un microphone, il peut donc réagir à un son! L'événement \blksm{event-clap} se déclenche si Thymio entend un son fort, comme par exemple quelqu'un qui tape dans ses mains.
La paire événement-action suivante allumera les lumières en dessous du robot lorsque vous tapez dans vos mains: \blkc{clap}

\trickbox{Si vous vous trouvez dans un environnement bruyant, vous ne pourrez pas utiliser cet événement, car le niveau sonore sera toujours haut et l'événement s'activera à répétition.}

\exercisebox{\thechapter.2}{
Écrivez un programme qui fasse démarrer le robot quand vous tapez dans vos mains et le fasse s'arrêter lorsque vous touchez un bouton.
\vspace{.5em}\\
Puis écrivez un programme qui fasse l'opposé : démarrer lorsque vous touchez un bouton et s'arrêter lorsque vous tapez dans vos mains.
}

\sect{C'est bien Thymio!}

Il est important de récompenser votre animal de compagnie quand il est gentil, c'est pareil avec Thymio !
Il peut vous détecter si vous lui donner une petite tape sur la tête grâce à l'événement \blksm{event-tap}.
Par exemple, la paire événement-action suivante allument les lumières du haut du lorsque vous lui donner une petite tape : \blkc{touch}

Construisez un programme avec cette paire événement-action et la paire suivante qui allume les lumières du bas du robot lorsque vous tapez dans vos mains : \blkc{clap}

{\raggedleft \hfill Programme \bu{whistles.aesl}}

Arrivez-vous à n'allumer que les lumières du haut ?
C'est difficile à faire : une tape génère un son qui est assez fort pour faire aussi s'allumer les lumières du bas.
Avec un peu de pratique, on arrive à taper le robot assez gentillement pour que le son résultant ne soit pas suffisant pour être considéré.

\exercisebox{\thechapter.3}{
Écrivez un programme qui fasse avancer le robot jusqu'à ce qu'il touche un mur.
\vspace{.5em}\\
\textbf{Faites attention} à ce que le robot \textbf{bouge lentement} afin qu'il ne s'endomage pas.
}