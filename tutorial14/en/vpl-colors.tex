% !TeX root = vpl.tex

\chap{Changing Colors}\label{ch.colors}

\sect{Display colors}

Create a program that causes two different colors to be displayed on the
top of the Thymio robot when the front and back buttons are touched, and
two other colors to be displayed on the bottom of the robot when the
left and right buttons are touched.

{\raggedleft \hfill Program file \bu{colors.aesl}}

We need four event-actions pairs. There are four events---touching the
four buttons---and a color action is associated with each event. Note
the difference between the action blocks \blksm{action-colors-up} and
\blksm{action-colors-down}. The first block changes the color displayed
on the top of the robot, while the second changes the color on the
bottom of the robot. The block for the bottom light has two black marks
that represent the wheels and a white dot representing the support at
the front of the robot (\cref{fig.bottom}).

This program is shown in \cref{fig.colors-a}.

What colors are displayed? In the first three actions, the slider for
one color is moved to the right edge, while the sliders for the other
two colors are moved to the left edge. The colors are not mixed so these
actions display pure red, blue and green, respectively. The action
associated with the left button mixes red and green giving yellow. You
can see that the background of the color action block changes when the
sliders are moved and shows which color the robot will display.

Run the program \blksm{run} and check that touching buttons changes the
robot's colors. \Cref{fig.front} shows the Thymio displaying red on the
top and \cref{fig.bottom} shows it displaying green on the bottom.

\exercisebox{\thechapter.1}{ Experiment with the sliders to see which
colors can be displayed. }

\trickbox[Information]{\gr{color-cubes-en}{1} By mixing together red,
green and blue, you can make any color!}

\sect{Turn the lights off}

Let us modify the program so that the lights are turned off when the
center button is touched. We need two event-actions pairs, one to turn
off the top light and the other to turn off the bottom light. By moving
all three sliders in the color action block to the left, as in
\cref{fig.colors-b}, no colors are displayed and the light is turned
off. The \emph{event is the same} in both pairs---touching the center
button---but the \emph{actions are different}---turning off the top or
bottom light.

Do not forget to click \blksmpure{run} to run the program. In the
future, we will not remind you to click this button to run a program.

\sect{Multiple actions associated with one event}

Rather than using two pairs to turn of the top and bottom lights, we can
associate two actions with one event in an event-actions pair. After
dragging and dropping the top color action into the outline, a gray
outline will appear to the right of the action. You can now drag and
drop the bottom color action into this outline, giving a pair with one
event and two actions:\label{p.multiple}

\blkc{colors-multiple}

{\raggedleft \hfill Program file \bu{colors-multiple.aesl}}

The use of pairs with multiple actions makes programs shorter and easy
to read and should be used whenever possible.

\hspace*{5ex}

\importantbox[Multiple event-actions pairs]{
\begin{itemize}[noitemsep,nosep,leftmargin=*]
\item When a program is run, all the event-actions pairs in the program
are run.
\item It is possible for several pairs to have the same event as
long as they have different associated action blocks.
\item It is possible for several pairs to have the same event as long
as their parameters are different. For example, you can have several
pairs with the button event, if different sets of buttons are clicked
in the events.
\item If the event and the action block are the same in several pairs,
VPL will display an error message (in area 3 in \cref{fig.vplgui}).
You will not be able to run the program as long as there are errors.
\end{itemize}
}

\begin{figure}
\centering
    \subfigure[Changing colors when a button is touched]{
		\label{fig.colors-a}
		\includegraphics[width = 0.4\textwidth]{colors1}
	}
	\hspace{1.5cm}
    \subfigure[Turn the colored lights off when a button is touched]{
		\label{fig.colors-b}
		\includegraphics[width = 0.4\textwidth]{colors2}
	}
    \caption{Play with the lights of Thymio}
    \label{fig.colors}
\end{figure}
