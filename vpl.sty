\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{babel}
\usepackage{graphicx,url}
\usepackage[usenames,dvipsnames]{color}
\usepackage[colorlinks=true,linkcolor=Blue,urlcolor=Blue,citecolor=Blue]{hyperref}
\usepackage{microtype}
\usepackage[a4paper,top=3cm,bottom=3cm,inner=2.5cm,outer=4cm]{geometry}
\usepackage{enumitem}

% for boxes
\usepackage[tikz]{bclogo}
\usepackage{framed}

\usepackage{floatrow}

\usepackage{libertine}
\renewcommand*\familydefault{\sfdefault}
\usepackage[T1]{fontenc}

\usepackage{subfigure}

\usepackage[capitalise,noabbrev]{cleveref}

% End of packages

\renewcommand{\baselinestretch}{1.05}
\setlength{\parskip}{0.3\baselineskip plus 1pt minus 1pt}
\parindent=0pt

% Font for buttons and menus
\newcommand*{\bu}[1]{\textbf{#1}}

% Font for program entities
\newcommand*{\p}[1]{\texttt{\textup{#1}}}

% Inline graphics (large size)
\newcommand*{\blk}[2][-15]{\raisebox{#1pt}%
{\includegraphics[height=40pt,keepaspectratio=true]{#2}}}

% Inline graphics (medium size)
\newcommand*{\blkmed}[2][-10]{\raisebox{#1pt}%
{\includegraphics[height=30pt,keepaspectratio=true]{#2}}}

% Inline graphics (small)
\newcommand*{\blksmpure}[1]{\raisebox{-.2em}%
{\includegraphics[height=1em,keepaspectratio=true]{#1}}}

% Inline graphics (small with large block in margin}
\newcommand*{\blksm}[1]{\raisebox{-.2em}%
{\includegraphics[height=1em,keepaspectratio=true]{#1}}\marginpar[\hfill\raisebox{-1.2em}{\includegraphics[width=3em,keepaspectratio=true]{#1}}]{\raisebox{-1.2em}{\includegraphics[width=3em,keepaspectratio=true]{#1}}}}

% Centered inline graphics
\newcommand*{\blkc}[1]{\vskip .1em\makebox[\textwidth]{\raisebox{-1em}{\includegraphics[height=4em]{#1}}}\vskip .3em}

% Centered image
\newcommand*{\gr}[2]%
{\begin{center}
\includegraphics[width=#2\textwidth,keepaspectratio=true]{#1}
\end{center}}

% Figures
%\DeclareFloatVCode{grayruleabove}%
%{{\color{black!20}\par\rule\hsize{2.2pt}\vskip4pt\par}}
%\DeclareFloatVCode{grayrulebelow}%
%{{\color{black!20}\par\vskip4pt\rule\hsize{2.2pt}}}
%
% commands to switch on and off framing
%\newcommand{\framedfloat}{\floatsetup{framefit=yes,heightadjust=all,framearound=all,rowprecode=grayruleabove,rowpostcode=grayrulebelow}}

\DeclareColorBox{mycolorbox}{\fcolorbox{black!20}{white}}

\newcommand{\framedfloat}{\floatsetup{style=plain,framestyle=colorbox,framefit=yes,heightadjust=all,framearound=all,frameset={\fboxrule3pt\fboxsep4pt},colorframeset=mycolorbox}}

\newcommand{\plainfloat}{\floatsetup{style=plain}}

\framedfloat

% Box
\newenvironment{gbar}[1]{%
\def\FrameCommand {{\color {#1}\vrule width 13 pt }}%
\MakeFramed {\advance\hsize -\width \FrameRestore }}%
{\endMakeFramed}

\newcommand*{\infobox}[4]{%
\vskip .2em%
\begin{bclogo}[couleur = #3, epBord = .5, arrondi = 0.1, logo = #4, ombre = false, barre = none, marge = 8]{\ #1}%
\begin{gbar}{#3}%
\vspace{.3em}%
#2%
\end{gbar}%
\end{bclogo}%
\vskip .2em%
}

% TODO: remove that
\newcommand{\centeredbox}[1]{%
\begin{center}%
\fbox{%
\begin{minipage}{.8\textwidth}%
#1\end{minipage}}%
\end{center}}

% Change style of chapter and section headings
\newcommand*{\chap}[1]{\chapter[#1]{\LARGE #1}}
\newcommand*{\sect}[1]{\section*{\textit{#1}}}

% Less space before chapter
\makeatletter
\def\@makechapterhead#1{%
  \vspace*{10\p@}%
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
        \huge\bfseries \@chapapp\space \thechapter
        \par\nobreak
        \vskip 20\p@
    \fi
    \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    \vskip 10\p@
  }}
\def\@schapter#1{\if@twocolumn
                   \@topnewpage[\@makeschapterhead{#1}]%
                 \else
                   \@makeschapterhead{#1}%
                   \@afterheading
                 \fi}
\def\@makeschapterhead#1{%
  \vspace*{10\p@}%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \Huge \bfseries  #1\par\nobreak
    \vskip 10\p@
  }}
\makeatother

% Listings
\usepackage{listings}
\lstdefinelanguage{aseba}
{
morekeywords={var,if,then,else,do,end,while,ontimer,onevent,emit,call,when,for,in,step,and,or,not}
}
\lstset{basicstyle=\ttfamily,language=aseba,tabsize=4,keywordstyle=\color{blue},aboveskip=0.2em,belowskip=0.2em}
%\newfloat{Listing}{tbp}{lst}[chapter]